/*
  * A preference for a particular contrast factor in an image.
  * Using a super simple contrast metric-- look for the maximum and minimum
  * signal in the image, and get their ratio.
  *
  * Preferences start with a prefered contrast ratio
 */

var ContrastPreferenceGenerator = PreferenceGenerator.extend({
  init : function(prefContrast){
    this._super();
    this.name = "ContrastPreferenceGenerator"  + this.id; //overwrite the name
    this.prefContrast = prefContrast;             //able to be supplied a prefered contrast (all things generated by this generator like the prefered contrast)
  },

  /**
   * Create a new preference that has a particular contrast ratio
   * @param  {Number} contrastRatio the amount of contast this preference should have in an image. Optional.
   *
   * @return {Object}               closure with a way to calcualte a preference, as well as a handling function for failure
   */
  generate : function(contrastRatio){
    var favContrast;

    //do we have a prefered contrast to use for generating this prefrence?
    if(contrastRatio){
      favContrast = contrastRatio;
    }else if(this.prefContrast){ //when we set up the generator, we gave it a preferred contrast
      favContrast = this.prefContrast;
    }else{
      //we don't :(
      console.log("Contrast Preference Generator was not supplied any constraints on contrasts")
    }

    return new ContrastPreference(favContrast);
  }
});
